---
const themes = [
    { name: "dark", label: "Dark" },
    { name: "light", label: "Light" },
    { name: "terminal", label: "Terminal" },
];
---

<div class="theme-switcher">
    <select
        id="theme-select"
        name="theme-select"
        >
        <!-- class="bg-[--color-bg] text-[--color-text] border border-[--color-border] rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-[--color-primary]" -->
        {
            themes.map((theme) => (
                <option value={theme.name}>{theme.label}</option>
            ))
        }
    </select>
</div>

<script>
    // Aplicar el tema inmediatamente al cargar la página
    const savedTheme = localStorage.getItem("theme") || "dark";
    document.documentElement.setAttribute("data-theme", savedTheme);

    // Esperar a que el DOM esté listo
    document.addEventListener("DOMContentLoaded", () => {
        const themeSelect = document.getElementById(
            "theme-select"
        ) as HTMLSelectElement;

        if (themeSelect) {
            // Establecer el valor inicial
            themeSelect.value = savedTheme;

            // Manejar cambios en el selector
            themeSelect.addEventListener("change", (e) => {
                const newTheme = (e.target as HTMLSelectElement).value;
                document.documentElement.setAttribute("data-theme", newTheme);
                localStorage.setItem("theme", newTheme);
            });
        }
    });
</script>
